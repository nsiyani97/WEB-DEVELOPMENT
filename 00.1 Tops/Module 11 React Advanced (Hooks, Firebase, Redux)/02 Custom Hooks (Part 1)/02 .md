- Custom Hooks (Part 1) Topics to Cover:
- What is a custom hook and naming conventions (useSomething).
- Converting logic from components into hooks.
- Rules of hooks (only call at top level).
- Demo: Build useFetchData() hook for fetching API data.
- Depth: Explain how custom hooks promote reusability across components.

---

# ğŸ”¹ Custom Hooks (Part 1)

## What is this topic about?

In **medium to large React applications**, we often face problems like:

- Repeating the same logic in multiple components
- Components becoming too large and hard to maintain
- API fetching logic copied everywhere

ğŸ‘‰ **Custom Hooks** solve these problems by **extracting reusable logic** from components.

---

## 1ï¸âƒ£ What is a Custom Hook?

### âœ… Definition

A **Custom Hook** is a **JavaScript function** that:

- Uses **React hooks** internally (`useState`, `useEffect`, etc.)
- Encapsulates **reusable logic**
- Starts with the word **`use`**

ğŸ“Œ React treats any function starting with `use` as a hook.

---

### âœ… Naming Convention

âœ”ï¸ Must start with **`use`**
âœ”ï¸ Follow **camelCase**

```js
useFetchData;
useAuth;
useForm;
useLocalStorage;
```

âŒ Invalid:

```js
fetchDataHook;
myHook;
customfetch;
```

---

## 2ï¸âƒ£ Why Do We Need Custom Hooks?

### âŒ Problem (Without Custom Hook)

```js
function Users() {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetch("https://jsonplaceholder.typicode.com/users")
      .then((res) => res.json())
      .then((data) => {
        setData(data);
        setLoading(false);
      });
  }, []);
}
```

Now imagine:

- Same logic in **Products**
- Same logic in **Posts**
- Same logic in **Orders**

ğŸ‘‰ **Code duplication ğŸ˜µ**

---

### âœ… Solution (With Custom Hook)

- Move logic to **custom hook**
- Reuse it everywhere

---

## 3ï¸âƒ£ Converting Component Logic into a Custom Hook

### ğŸ”„ Step-by-step Thinking

| Step | What We Do                            |
| ---- | ------------------------------------- |
| 1    | Identify reusable logic               |
| 2    | Create a function starting with `use` |
| 3    | Move `useState` & `useEffect`         |
| 4    | Return required values                |

---

## 4ï¸âƒ£ Rules of Hooks (Very Important âš ï¸)

React hooks follow **strict rules**.

### âœ… Rule 1: Only call hooks at the **top level**

âœ”ï¸ Allowed:

```js
useEffect(() => {}, []);
```

âŒ Not allowed:

```js
if (condition) {
  useEffect(() => {}, []);
}
```

---

### âœ… Rule 2: Only call hooks from

- React components
- Custom hooks

âŒ Not allowed:

```js
function fetchData() {
  useState(); // âŒ
}
```

---

### âœ… Rule 3: Custom hooks must start with `use`

This helps React **track hook order correctly**.

---

## 5ï¸âƒ£ Demo: Build `useFetchData()` Custom Hook

Now letâ€™s **build a real reusable hook**.

---

## ğŸ§  What `useFetchData` Will Do

- Fetch API data
- Handle loading
- Handle error
- Return reusable state

---

## ğŸ“ Project Structure

```
src/
 â”œâ”€ hooks/
 â”‚   â””â”€ useFetchData.js
 â”œâ”€ components/
 â”‚   â”œâ”€ Users.jsx
 â”‚   â””â”€ Posts.jsx
 â””â”€ App.jsx
```

---

## 6ï¸âƒ£ Creating the Custom Hook

### ğŸ“„ `hooks/useFetchData.js`

```js
import { useState, useEffect } from "react";

function useFetchData(url) {
  // 1ï¸âƒ£ State for data
  const [data, setData] = useState(null);

  // 2ï¸âƒ£ State for loading
  const [loading, setLoading] = useState(true);

  // 3ï¸âƒ£ State for error
  const [error, setError] = useState(null);

  // 4ï¸âƒ£ Side effect for API call
  useEffect(() => {
    fetch(url)
      .then((response) => {
        if (!response.ok) {
          throw new Error("Something went wrong");
        }
        return response.json();
      })
      .then((result) => {
        setData(result);
        setLoading(false);
      })
      .catch((err) => {
        setError(err.message);
        setLoading(false);
      });
  }, [url]);

  // 5ï¸âƒ£ Return values
  return { data, loading, error };
}

export default useFetchData;
```

---

## ğŸ§© Line-by-Line Explanation

### ğŸ”¹ `useState`

- Stores fetched data
- Manages loading state
- Handles errors

### ğŸ”¹ `useEffect`

- Runs when component mounts
- Runs again if `url` changes

### ğŸ”¹ `return`

- Makes the hook reusable
- Components decide **how to use the data**

---

## 7ï¸âƒ£ Using Custom Hook in Components

---

### ğŸ“„ `components/Users.jsx`

```js
import useFetchData from "../hooks/useFetchData";

function Users() {
  const { data, loading, error } = useFetchData("https://jsonplaceholder.typicode.com/users");

  if (loading) return <p>Loading users...</p>;
  if (error) return <p>{error}</p>;

  return (
    <ul>
      {data.map((user) => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}

export default Users;
```

---

### ğŸ“„ `components/Posts.jsx`

```js
import useFetchData from "../hooks/useFetchData";

function Posts() {
  const { data, loading, error } = useFetchData("https://jsonplaceholder.typicode.com/posts");

  if (loading) return <p>Loading posts...</p>;
  if (error) return <p>{error}</p>;

  return (
    <ul>
      {data.slice(0, 5).map((post) => (
        <li key={post.id}>{post.title}</li>
      ))}
    </ul>
  );
}

export default Posts;
```

---

## 8ï¸âƒ£ App Component

### ğŸ“„ `App.jsx`

```js
import Users from "./components/Users";
import Posts from "./components/Posts";

function App() {
  return (
    <>
      <h2>Users</h2>
      <Users />

      <h2>Posts</h2>
      <Posts />
    </>
  );
}

export default App;
```

---

## 9ï¸âƒ£ Depth: How Custom Hooks Promote Reusability

### ğŸ” Without Custom Hooks

- Copy-paste logic
- Bug fixes in multiple places
- Difficult maintenance

### â™»ï¸ With Custom Hooks

- Write logic **once**
- Reuse across components
- Cleaner & smaller components
- Easier testing
- Scales well in large apps

---

## ğŸ§  Interview Key Points

- Custom hooks **share logic, not UI**
- They improve **maintainability**
- They follow **same rules as React hooks**
- They help avoid **prop drilling & duplication**

---
